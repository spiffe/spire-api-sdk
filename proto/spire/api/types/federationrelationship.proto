syntax = "proto3";
package spire.api.types;
option go_package = "github.com/spiffe/spire-api-sdk/proto/spire/api/types";

message FederationRelationship {
    // The trust domain name (e.g., "example.org") to federate with. 
    string trust_domain = 1;

    // URL of the SPIFFE bundle endpoint that provides the trust
    // bundle to federate with. Must use the HTTPS protocol.
    string url = 2;

    // Required. Authentication method.
    oneof authentication {
        // Use SPIFFE authentication.
        SPIFFEAuthentication spiffe = 3;

        // Use Web PKI authentication. 
        WebPKIAuthentication web_pki = 4;
    }
}

message SPIFFEAuthentication {
    // Specifies the expected SPIFFE ID of the SPIFFE bundle endpoint server.
    // The SPIRE Server SPIFFE ID within the trust domain will be
    // used if this is empty.
    string spiffe_id = 1;
}

message WebPKIAuthentication {
}

message FederationRelationshipMask {
    // URL field mask.
    bool url = 1;

    // Authentication field mask.
    bool authentication = 2;
}
